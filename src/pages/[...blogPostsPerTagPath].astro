---
import { getUniqueTags, getTagPath} from '@utilities/tags';
import { locales } from '@i18n/i18n';
import { uiStrings} from '@i18n/ui';
import PostsPerTag from "../layouts/PostsPerTag.astro";

interface Tag {
	tag: string;
  tagName: string;
}

export async function getStaticPaths() {
  let allTags:any = []
  for (let locale of locales) {
    const tags = (await getUniqueTags('blog', locale)).map(tag=>({
      params: {
        blogPostsPerTagPath: `${getTagPath(locale ,tag.tag)}`
      },
      props: {
        title: `${uiStrings.tagHeadingSingular[locale]}: ${tag.tagName}`,
        tag: tag.tag,
      }
    }))
    allTags.push(...tags)
  }
  return allTags
}
---
<PostsPerTag frontmatter={Astro.props} collection="blog"/>
